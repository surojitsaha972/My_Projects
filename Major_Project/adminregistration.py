# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'adminregistration.ui'
#
# Created by: PyQt5 UI code generator 5.15.9
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from PyQt5.QtWidgets import QMessageBox
import sqlite3


class Ui_Adminreg(object):
    def setupUi(self, Adminreg):
        Adminreg.setObjectName("Adminreg")
        Adminreg.resize(1398, 909)
        self.centralwidget = QtWidgets.QWidget(Adminreg)
        self.centralwidget.setObjectName("centralwidget")
        self.frame = QtWidgets.QFrame(self.centralwidget)
        self.frame.setGeometry(QtCore.QRect(-10, 20, 1361, 821))
        self.frame.setStyleSheet("background:rgb(246, 255, 235)")
        self.frame.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.frame.setFrameShadow(QtWidgets.QFrame.Raised)
        self.frame.setObjectName("frame")
        self.line3 = QtWidgets.QLineEdit(self.frame)
        self.line3.setGeometry(QtCore.QRect(720, 230, 341, 41))
        font = QtGui.QFont()
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.line3.setFont(font)
        self.line3.setStyleSheet("background:rgb(240, 249, 255)")
        self.line3.setText("")
        self.line3.setObjectName("line3")
        self.l3 = QtWidgets.QLabel(self.frame)
        self.l3.setGeometry(QtCore.QRect(530, 230, 81, 51))
        font = QtGui.QFont()
        font.setPointSize(11)
        font.setBold(True)
        font.setWeight(75)
        self.l3.setFont(font)
        self.l3.setObjectName("l3")
        self.line5 = QtWidgets.QLineEdit(self.frame)
        self.line5.setGeometry(QtCore.QRect(730, 350, 331, 41))
        font = QtGui.QFont()
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.line5.setFont(font)
        self.line5.setStyleSheet("background:rgb(240, 249, 255)")
        self.line5.setText("")
        self.line5.setEchoMode(QtWidgets.QLineEdit.Password)
        self.line5.setObjectName("line5")
        self.frame_2 = QtWidgets.QFrame(self.frame)
        self.frame_2.setGeometry(QtCore.QRect(40, 0, 271, 811))
        self.frame_2.setStyleSheet("background-color: rgb(199, 162, 255);\n"
"border-radius:10px;")
        self.frame_2.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.frame_2.setFrameShadow(QtWidgets.QFrame.Raised)
        self.frame_2.setObjectName("frame_2")
        self.l2_2 = QtWidgets.QLabel(self.frame)
        self.l2_2.setGeometry(QtCore.QRect(530, 160, 111, 51))
        font = QtGui.QFont()
        font.setPointSize(11)
        font.setBold(True)
        font.setWeight(75)
        self.l2_2.setFont(font)
        self.l2_2.setObjectName("l2_2")
        self.line1 = QtWidgets.QLineEdit(self.frame)
        self.line1.setGeometry(QtCore.QRect(720, 90, 341, 41))
        font = QtGui.QFont()
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.line1.setFont(font)
        self.line1.setStyleSheet("background:rgb(240, 249, 255)")
        self.line1.setText("")
        self.line1.setObjectName("line1")
        self.l1 = QtWidgets.QLabel(self.frame)
        self.l1.setGeometry(QtCore.QRect(520, 90, 121, 51))
        font = QtGui.QFont()
        font.setPointSize(11)
        font.setBold(True)
        font.setWeight(75)
        self.l1.setFont(font)
        self.l1.setObjectName("l1")
        self.l4 = QtWidgets.QLabel(self.frame)
        self.l4.setGeometry(QtCore.QRect(530, 290, 131, 41))
        font = QtGui.QFont()
        font.setPointSize(11)
        font.setBold(True)
        font.setWeight(75)
        self.l4.setFont(font)
        self.l4.setObjectName("l4")
        self.line4 = QtWidgets.QLineEdit(self.frame)
        self.line4.setGeometry(QtCore.QRect(730, 290, 331, 41))
        font = QtGui.QFont()
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.line4.setFont(font)
        self.line4.setStyleSheet("background:rgb(240, 249, 255)")
        self.line4.setText("")
        self.line4.setEchoMode(QtWidgets.QLineEdit.Password)
        self.line4.setObjectName("line4")
        self.l5 = QtWidgets.QLabel(self.frame)
        self.l5.setGeometry(QtCore.QRect(530, 350, 171, 41))
        font = QtGui.QFont()
        font.setPointSize(11)
        font.setBold(True)
        font.setWeight(75)
        self.l5.setFont(font)
        self.l5.setObjectName("l5")
        self.line2 = QtWidgets.QLineEdit(self.frame)
        self.line2.setGeometry(QtCore.QRect(720, 170, 341, 41))
        font = QtGui.QFont()
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.line2.setFont(font)
        self.line2.setStyleSheet("background:rgb(240, 249, 255)")
        self.line2.setText("")
        self.line2.setObjectName("line2")
        self.b1 = QtWidgets.QPushButton(self.frame)
        self.b1.setGeometry(QtCore.QRect(650, 480, 251, 51))
        font = QtGui.QFont()
        font.setPointSize(14)
        font.setBold(True)
        font.setWeight(75)
        self.b1.setFont(font)
        self.b1.setStyleSheet("background-color: rgb(252,198, 255);\n"
"background-color: rgb(193, 193, 193);")
        self.b1.setObjectName("b1")
        self.label = QtWidgets.QLabel(self.frame)
        self.label.setGeometry(QtCore.QRect(590, 10, 361, 51))
        font = QtGui.QFont()
        font.setPointSize(16)
        font.setBold(True)
        font.setWeight(75)
        self.label.setFont(font)
        self.label.setObjectName("label")
        Adminreg.setCentralWidget(self.centralwidget)
        self.menubar = QtWidgets.QMenuBar(Adminreg)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 1398, 26))
        self.menubar.setObjectName("menubar")
        Adminreg.setMenuBar(self.menubar)
        self.statusbar = QtWidgets.QStatusBar(Adminreg)
        self.statusbar.setObjectName("statusbar")
        Adminreg.setStatusBar(self.statusbar)

        self.retranslateUi(Adminreg)
        QtCore.QMetaObject.connectSlotsByName(Adminreg)
        
        self.b1.clicked.connect(self.add)


    def retranslateUi(self, Adminreg):
        _translate = QtCore.QCoreApplication.translate
        Adminreg.setWindowTitle(_translate("Adminreg", "MainWindow"))
        self.l3.setText(_translate("Adminreg", "Email :"))
        self.l2_2.setText(_translate("Adminreg", "Phone No. :"))
        self.l1.setText(_translate("Adminreg", " Name:"))
        self.l4.setText(_translate("Adminreg", "Password"))
        self.l5.setText(_translate("Adminreg", "Re Enter Password"))
        self.b1.setText(_translate("Adminreg", "Register"))
        self.label.setText(_translate("Adminreg", "Admin Registration Form"))

    def add(self):
        # import sqlite3
        conn=sqlite3.connect("UMRS.db")
        cur=conn.cursor()
        a=self.line1.text()
        b=self.line2.text()
        c=self.line3.text()
        d=self.line4.text()
        e=self.line5.text()
        if(a==""):
            msg=QMessageBox()
            msg.setIcon(QMessageBox.Critical)
            msg.setText("name error")
            msg.setWindowTitle("please enter name")
            msg.show()
            retval=msg.exec_()
        elif(b==""):
            msg=QMessageBox()
            msg.setIcon(QMessageBox.Critical)
            msg.setText("phone no error")
            msg.setWindowTitle("please enter phone no")
            msg.show()
            retval=msg.exec_()
        elif(b.isdigit()==False):
            msg=QMessageBox()
            msg.setIcon(QMessageBox.Critical)
            msg.setText("phone no error")
            msg.setWindowTitle("please enter phone no")
            msg.show()
            msg.exec_()
        elif len(b)!=10:
            msg=QMessageBox()
            msg.setIcon(QMessageBox.Critical)
            msg.setText("phone no error")
            msg.setWindowTitle("please enter phone no")
            msg.show()
            msg.exec_()
        elif(c==""):
            msg=QMessageBox()
            msg.setIcon(QMessageBox.Critical)
            msg.setText("Email ID error")
            msg.setWindowTitle("please enter Email ID")
            msg.show()
            msg.exec_()
        elif(d==""):
            msg=QMessageBox()
            msg.setIcon(QMessageBox.Critical)
            msg.setText("password error")
            msg.setWindowTitle("please enter password")
            msg.show()
            msg.exec_()
        elif len(d)<8 or len(d)>15: 
            msg=QMessageBox()
            msg.setIcon(QMessageBox.Critical)
            msg.setText("password error")
            msg.setWindowTitle("please enter password")
            msg.show()
            msg.exec_()
        elif(e==""):
            msg=QMessageBox()
            msg.setIcon(QMessageBox.Critical)
            msg.setText("Re enter password error")
            msg.setWindowTitle("please enter Re enter password")
            msg.show()
            msg.exec_()
        elif len(e)<8 or len(e)>15:
            msg=QMessageBox()
            msg.setIcon(QMessageBox.Critical)
            msg.setText("Re enter password error")
            msg.setWindowTitle("please enter Re enter password")
            msg.show()
            msg.exec_()
        elif(d!=e):
            msg=QMessageBox()
            msg.setIcon(QMessageBox.Critical)
            msg.setText("password are not same ")
            msg.setWindowTitle("please give the same password")
            msg.show()
            msg.exec_()

        else:
            sql = "select count(*) from AdminLogin where Email = ? or Phoneno = ?"
            v1 = (c, b)  
            cur.execute(sql, v1)
            conn.commit()
            result = cur.fetchall()
            rc = result[0][0] 
            if rc > 0: 
                print("Email ID or Phone number already exists")
            else:
                sql = "insert into AdminLogin values(?,?,?,?)"
                v2 = (c,d,a,b)
                cur.execute(sql, v2)  
                conn.commit() 
                rc = cur.rowcount

                msg=QMessageBox()
                msg.setIcon(QMessageBox.information)
                msg.setText("Admin registered successfully")
                msg.setWindowTitle("Registration")
                msg.show()
                msg.exec_()
                
                # print("Admin registered successfully")
        conn.close()


if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    Adminreg = QtWidgets.QMainWindow()
    ui = Ui_Adminreg()
    ui.setupUi(Adminreg)
    Adminreg.show()
    sys.exit(app.exec_())
